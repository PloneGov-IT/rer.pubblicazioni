<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="rer.pubblicazioni">

    <metal:css fill-slot="style_slot">
      <link rel="stylesheet" type="text/css" href="${context/portal_url}/++plone++rer.pubblicazioni/css/pubblicazioni.css"></metal:css>
<body>

  <metal:content-core fill-slot="content-core">
  <metal:block define-macro="content-core">
    <div class="publicationWrapper">

      <div class="abstractwrapper" tal:condition="context/abstract">
        <p class="item-label">
          <strong i18n:translate="rer_description_abstract">Description/Abstract</strong>:
          <span class="item-value" tal:content="structure context/abstract/output | nothing">
            Abstract
          </span>
        </p>
      </div>

      <div class="authorWrapper" tal:condition="context/publicationAuthor">
        <p class="item-label">
          <strong i18n:translate="rer_pub_author_tags">Author/Authors</strong>:
        </p>
        <tal:author tal:repeat="author context/publicationAuthor">
          <p class="item-value">
          <a href="${context/portal_url}/@@search?authors=${author}" 
                 target="_blank"
                 tal:content="author">
                  Author name 
              </a>
          </p>
        </tal:author>
      </div>

      <div class="publicationdatewrapper" tal:condition="context/publicationDate">
        <p class="item-label">
          <strong i18n:translate="rer_publication_date">Publication date</strong>:
          <span class="item-value" tal:content="python:view.toLocalizedTime(context.publicationDate) or ''">
            date
          </span>
        </p>
      </div>

      <div class="publicationtypeewrapper" tal:condition="context/publicationType">
        <p class="item-label">
          <strong i18n:translate="rer_publication_type"> Publication type</strong>:
        </p>
        <tal:author tal:repeat="type context/publicationType">
          <p class="item-value"
             tal:content="type"> Type </p>
        </tal:author>
      </div>

      <div class="publicationlanguageewrapper" tal:condition="context/publicationLanguage">
        <p class="item-label">
          <strong i18n:translate="rer_publication_language">Language</strong>:
        </p>
        <span class="item-value" tal:content="context/publicationLanguage">
          lang
        </span>
      </div>

      <div class="publicationseriesewrapper" tal:condition="context/publicationSeries">
        <p class="item-label">
          <strong i18n:translate="rer_published_in">Published in</strong>:
          <span class="item-value" tal:content="context/publicationSeries">
            series
          </span>
        </p>
      </div>

      <div class="publicationeditorewrapper" tal:condition="context/publicationEditor">
        <p class="item-label">
          <strong i18n:translate="rer_publication_editor">Editor</strong>:
          <span class="item-value" tal:content="context/publicationEditor">
            editor
          </span>
        </p>
      </div>

      <div class="publicationrightsewrapper" tal:condition="context/publicationRights">
        <p class="item-label">
          <strong i18n:translate="rer_publication_rights">Copyrights</strong>:
          <span class="item-value" tal:content="context/publicationRights">
            Rights
          </span>
        </p>
      </div>

      <div class="urlwrapper" tal:condition="python: context.publicationURL != 'http://' and context.publicationURL">
        <p class="item-label">
          <strong i18n:translate="rer_publication_url">URL</strong>:
          <span class="item-value" tal:content="structure context/publicationURL | nothing">
            URL
          </span>
        </p>
      </div>

      <div class="filewrapper" tal:condition="context/publicationFile">
	<tal:fileinfo tal:define="file_size python: format(context.publicationFile.getSize()/float(1024*1024), '.2f');
	                          file_content_type python: context.publicationFile.contentType">
        <p class="item-label" tal:define="file nocall:context/publicationFile">
          <strong i18n:translate="rer_publication_download">Scarica la pubblicazione</strong>:
          <a tal:attributes="href string:${context/absolute_url}/@@download/publicationFile/${context/publicationFile/filename}"> download </a>
	  <span class="file_info" tal:content="string: (${file_content_type}, ${file_size} MB)">
        </p>
	</tal:fileinfo>
      </div>



    </div>

  </metal:block>
  </metal:content-core>


</body>
</html>
